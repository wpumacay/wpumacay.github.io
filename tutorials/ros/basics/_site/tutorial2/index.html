<h1 id="ros---basics-demo">ROS - Basics demo</h1>

<p>We have already some tools to start building a simple ROS application. We will start by making a simple app based on the <strong>Udacity-RoboND</strong> demo called <em>SimpleArm</em>.</p>

<h2 id="intro">Intro</h2>

<p>TODO:</p>

<h2 id="setup">Setup</h2>

<p>TODO:</p>

<h2 id="understanding-the-package">Understanding the package</h2>

<p>First, let’s check which nodes we are dealing with when we launch the application. A simple <em>rosnode list</em> and <em>rostopic list</em> will help us find out what is going on inside the package.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ rosnode list
    /gazebo
    /joint_state_publisher
    /robot_state_publisher
    /rosout
    /simple_arm/spawner
</code></pre></div></div>

<p>Well, we have some nodes running. Still, by the names it seems that the <em>/simple_arm/spawner</em> node just was in charge of spawning the 2dof arm. After digging a bit inside the package, it seems that the <em>/joint_state_publisher</em> and <em>/robot_state_publisher</em> nodes are just there to do not much. If you comment them in the <em>robot_description.xml</em> file, and rerun the application everything works as it should. Maybe they were there for testing purposes, as the <em>/joint_state_publisher</em> when opened in <em>gui</em> mode, gives a nice GUI to play with the joint angles. If you enable GUI mode for that node, you will get a GUI that does nothing to the robot. It is publishing to the <em>/joint_states</em> topic, and you can even play with the GUI and echo the topic and see that indeed it changes it, but does nothing ( at least visually ) to the robot, as the robot joints are controller by <strong>JointPositionController</strong>, found in the <em>controllers.yaml</em> file, inside the <em>controllers</em> folder.</p>

<p>Let’s look at the topics to see what else does the package provides.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ rostopic list
    /clock
    /gazebo/link_states
    /gazebo/model_states
    /gazebo/parameter_descriptions
    /gazebo/parameter_updates
    /gazebo/set_link_state
    /gazebo/set_model_state
    /joint_states
    /rgb_camera/camera_info
    /rgb_camera/image_raw
    /rgb_camera/image_raw/compressed
    /rgb_camera/image_raw/compressed/parameter_descriptions
    /rgb_camera/image_raw/compressed/parameter_updates
    /rgb_camera/image_raw/compressedDepth
    /rgb_camera/image_raw/compressedDepth/parameter_descriptions
    /rgb_camera/image_raw/compressedDepth/parameter_updates
    /rgb_camera/image_raw/theora
    /rgb_camera/image_raw/theora/parameter_descriptions
    /rgb_camera/image_raw/theora/parameter_updates
    /rgb_camera/parameter_descriptions
    /rgb_camera/parameter_updates
    /rosout
    /rosout_agg
    /simple_arm/joint_1_position_controller/command
    /simple_arm/joint_1_position_controller/pid/parameter_descriptions
    /simple_arm/joint_1_position_controller/pid/parameter_updates
    /simple_arm/joint_1_position_controller/state
    /simple_arm/joint_2_position_controller/command
    /simple_arm/joint_2_position_controller/pid/parameter_descriptions
    /simple_arm/joint_2_position_controller/pid/parameter_updates
    /simple_arm/joint_2_position_controller/state
    /simple_arm/joint_states
    /tf
    /tf_static
</code></pre></div></div>

<p>Quite some topics :D. As we can see the <em>simple_arm</em> package has some topics it exposes, two of which we will be publishing to : <strong>/joint_1_position_controller/command</strong> and <strong>/joint_2_position_controller/command</strong> topics. When publishing to them, we will be sending joint commands to the controllers, and then they will do their job and set the position to the desired reference.</p>

<p>Just for fun, let’s check the graph of the application.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ rosrun rqt_graph rqt_graph
</code></pre></div></div>

<p><img src="/assets/images/tutorials/ros/img_tutorials_ros_basics_demo_graph.png" alt="Img_graph" /></p>

<p>Just to be clear, I have the <strong>arm_mover</strong> node running ( which is the one we will be making from scratch ) in order to see the topic it’s publishing to. As you can see, it is publishing to the command topics mentioned earlier; these are then sent to the simulator and then these are published to the <em>/simple_arm/joint_states</em> topic. We will make the <strong>simple_mover</strong> and <strong>arm_mover</strong> nodes a bit more complex than the original nodes made in the udacity course, by adding a simple GUI on top of Qt to handle the joints.</p>

<h2 id="first-basic-node---simple-mover">First basic node - Simple Mover</h2>

